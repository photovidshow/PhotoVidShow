using System;
using System.Collections.Generic;
using System.Text;
using System.IO;

namespace DVDSlideshow.BluRay.AVCHD
{
    class BDJOBDMVCreator
    {    
        private byte[] data = { 0x42, 0x44, 0x4a, 0x4f, 0x30, 0x32, 0x30, 0x30,
                                0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x3e,

                                0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x58,
                                0x00, 0x00, 0x00, 0xa6, 0x00, 0x00, 0x00, 0xaa,

                                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                                0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                                0x00, 0x00, 0x00, 0x0a, 0x2a, 0x2a, 0x2a, 0x2a,
                                0x2a, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                                0x00, 0x0e, 0x01, 0x00, 0x01, 0x30, 0x30, 0x30,
                                0x30, 0x30, 0x2a, 0x2e, 0x2a, 0x00, 0x00, 0x00,

                                0x00, 0x00, 0x00, 0x04, 0x00, 0x10, 0x00, 0x00,
                                0x00, 0x00, 0x00, 0x4a, 0x01, 0x00, 0x01, 0x10,

                                0x56, 0x78, 0x9a, 0xbc, 0x40, 0x01, 0x00, 0x00,
                                0x00, 0x00, 0x00, 0x3a, 0x00, 0x00, 0x00, 0x00,

                                0x10, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00,
                                0x01, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

                                0x05, 0x30, 0x30, 0x30, 0x30, 0x30, 0x06, 0x2f,
                                0x30, 0x30, 0x30, 0x30, 0x30, 0x00, 0x15, 0x70,
 
                                0x68, 0x6f, 0x74, 0x6f, 0x76, 0x69, 0x64, 0x73,
                                0x68, 0x6f, 0x77, 0x2e, 0x4d, 0x65, 0x6e, 0x75,

                                0x58, 0x6c, 0x65, 0x74, 0x00, 0x00, 0xff, 0xe0,
                                0x00, 0x00, 0x00, 0x01, 0x2e, 0x00
                              };


        public bool CreateBDJO(string inFolder)
        {
            string file = inFolder + "\\00000.bdjo";
            try
            {
                FileStream stream = new FileStream(file, FileMode.CreateNew);

                try
                {
                    using (BinaryWriter writter = new BinaryWriter(stream))
                    {
                        writter.Write(data);
                    }
                }
                finally
                {
                    stream.Close();
                }
            }
            catch (Exception exception)
            {
                AVCHDLog.Error("Failed to create '" + file + "' " + exception.Message);
                return false;
            }

            return true;
        }

    }
}
